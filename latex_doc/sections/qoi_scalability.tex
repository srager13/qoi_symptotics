
\section{QoI Scalability}
\label{sec:qoi_scalability}

As discussed in the previous sections, QoI %-- and consequently QoE --
is typically a highly
non-linear function of the number of packets delivered at the
destination.  \emph{For example, an image recognition application will
perform nearly the same for a range of compression ratios, suddenly
experiencing a spike at some particular ratio.} Given this behavior, simply
delivering the highest possible rate is not necessarily the best
option from a user QoI viewpoint. More generally, we would like to know
the capacity of a network (and relatedly, the scalability achievable)
if we wanted {\em not} the maximum {\em throughput} (as traditional
asymptotic analyses targets), but the maximum {\em QoI}. In other
words, given a certain QoI(e.g. completeness/diversity-timeliness pair) that is desired by the  user of a network,
what is the the number of nodes that the network can scale to?\emph{ And how
sensitive is the scalability to the QoI that is desired?}

We investigate this question in the context of multihop wireless networks
(such as mesh and sensor networks).
In \cite{scalability_manets_theory_vs_practice} an approximate upper bound on the
 scalability of a network was
considered in terms of the ``residual capacity'', that is, the difference
between the available and used capacities at a node. Assuming homogeneity, a
coarse-grained model was developed based on the simple observation
that the network can support the offered flows if and only if the
residual capacity at every node in the network is positive.  A generic
expression was derived there:


\begin{equation}
%\res = \avail - \Psi - \sum_j (1+\gamma_j)\cdot \usedJ   \label{eq:res}
R(m) = W(m) - \sum_j (1+\gamma_j)D^j(m),
\label{eq:res}
\end{equation}
where $R(m)$ is the {\em residual capacity} at a given node $m$, indicating
the capacity remaining at a node after taking into account the load
from all traffic sources from all nodes (Fig. \ref{resf}). This is the difference
between the {\em available capacity} $W(m)$  and the capacity $D^j(m)$
demanded by
each source $j$ (control overhead is regarded as one kind of
source), where $\gamma_j$ in the equation is the {\em contention factor} that is a rough inverse
measure of the spatial reuse, and indicates the number of  nodes that have
to defer on a transmission.
We refer the reader to \cite{scalability_manets_theory_vs_practice} for details on the contention factor
and derivation of Equation (\ref{eq:res}), and focus here on adapting the
formulation to accommodate QoI.

\begin{figure}
\begin{centering}
    \includegraphics[scale=0.6]{figures/residual.eps}
    \caption{Residual Capacities, Mesh Scenario}
    \label{resf}
\end{centering}
\end{figure}

Suppose that a network has $M$ types of flows. Each flow $j$ has its own
QoI-rate function $QRF_j(u_j)$ where $u_j$ is one of the possible QoI
values\footnote{Per flow QoI allows flexibility to have the range of
values appropriate for the application for that flow.}
for the application corresponding to flow $j$. Let $\xi(s)$ be a function that
maps a source rate $s$ to its average contribution to a node's demanded
capacity per Equation (\ref{eq:res}).
$\xi$ depends upon a number of factors such as the
average length of the flow, whether it is unicast or multicast etc. and
is instantiated in the context of the particular network.
With these, the demanded capacity from flow $j$ is

\begin{equation}
D^j = \xi(QRF_j(u_j)),
\end{equation}
where $u_j$ is the desired QoI of the application using flow $j$.

Combining with Equation (\ref{eq:res}), we have:

\begin{equation}
R(m) = W(m) - \sum_j (1+\gamma_j(m))\xi(QRF_j(u_j)(m))   \label{eq:utility}.
\end{equation}

We are given application QoI requirements, and QRF can be obtained by
empirical studies or given as part of the application profile.
$\xi$ needs to be calculated on a case by case basis
given the topology and the traffic profile.

For instance, given a top-K query with QoI demand $\textbf{q}=(C,T)$, we first determine the number $K_{req}$ to provide completeness $C$ from \emph{graph sumsim}. This results in a load in bits of $K_{req}*B$ where $B$ is the nominal image size.  Next, we obtain the required rate, which is $r_{req}\geq \frac{K_{req}B}{T}$. The QRF function for the spanner is also found similarly, where QoI demand $\textbf{q}=(D,T)$ relates the requested diversity $D$ to the number of images, hence traffic requirement.


We illustrate the relationship between QoI and scalability using a
 specific example.  Consider a
regular mesh network (also known as a ``Manhattan grid'') of $N$ nodes.
A continuous stream of traffic sent from each node to another node chosen
uniformly at random.\footnote{This is not
intended to model any particular operational scenario, only an
example to illustrate our model in a simple manner.}  Suppose
further that we use the multi-application scenario given in Figure
\ref{fig:comb1}, and that we
require a particular application QoI (score) $q$.  How
many nodes can the network support (i.e., what is the upper bound on
$N$) as a function of $q$?

To determine this, we apply Equation (\ref{eq:utility}) to the scenario.
$QRF(q)$ = $f^{-1}(q)$ where $f$ is the function represented by Figure
\ref{fig:comb1} that maps rates to achievable QoI.

Since the source and destination are chosen randomly, the scope of a flow is
the average path length. In~\cite{Silv83}, the average path length for a
regular mesh of $N$ nodes is shown to be
$\frac{2}{3}\cdot \sqrt{N}$. Thus, the used capacity per node
in an $N$ node network each node generating $x$ bps
is approximately $\xi(x) = \frac{2}{3}\cdot \sqrt{N}\cdot
x$.

Finally, the contention factor for unicast traffic in a mesh network
is $\gamma_1 = 7$ since the receiver
plus three neighbors of each of sender and receiver
 have to defer on this transmission. Since we
consider a stationary network, and are only looking for an approximate
upper bound on the scalability, we ignore the routing overhead and
assume the overhead due to MAC control messages is negligible.


%\begin{figure}[ht]
% \centering
%\includegraphics[scale=0.5]{unicast-contention}
%\includegraphics{ocr-scal}
%\caption{The unicast contention factor with 802.11g MAC.}
% \label{fig:unicast-contention}
%\end{figure}

Substituting  in Equation (\ref{eq:utility}), and noting that maximum
scalability is when \emph{R(m) = 0} for the node $m$ at which $R(m)$ reaches zero first, also called the \emph{bottleneck node}.  Assuming this node $m$ and dropping the per-node notation on $R$ and $W$, resulting in the maximum node capacity of
$
W = (1+7)\cdot \frac{2}{3}\cdot  \sqrt{N}\cdot  f^{-1}(q),
$
which simplifies to a maximum network size of

\begin{equation}
N = [\frac{3\cdot W}{16\cdot f^{-1}(q)}]^2.
\end{equation}

We note that given the coarseness of the model and the abstraction of many
details, the above is by no means intended to be an accurate predictor of
$N$ in a real network. However, since the main intent is to study how
the scalability {\em changes}
with respect to QoI (rather than focus on absolute values),
such an approximate upper bound suffices.

%Figure \ref{fig:scal-log} shows our numerical results for the
%scalability achieved by the multi-application shown in
%Figure \ref{fig:comb1}. We consider two data rates 5 Mbps and 10 Mbps (the
%value of $A$ in the above equation), and
%plot one curve for each. In particular, on the X-axis we have a desired
%QoI. The Y-axis shows, on a logarithmic scale,
%the scalability (number of nodes) that can be
%achieved if we deliver that QoI using the multi-application mapping
%function.
%We can discern three
%regions, corresponding to each of the individual applications.
%As can be seen, there is a dramatic drop in scalability even for
%moderate QoI. Note that the scalability is plotted on a logarithmic scale,
%and therefore the difference is quite significant --
% more than five orders of magnitude between the highest and lowest QoI!


%\begin{figure}[ht]
% \centering
%\includegraphics[scale=0.4]{scalability_plots/2curves-scal-linear}
%\includegraphics{ocr-scal}
%\caption{Approximate upper bound on the Number of nodes to which the network scales, as a function of QoI
%(linear scale).}
% \label{fig:scal-linear}
%\end{figure}


%\begin{figure}[ht]
% \centering
%\includegraphics[scale=0.4]{scalability_plots/2curves-scal-logarithmic}
%%\includegraphics{ocr-scal}
%\caption{Approximate upper bound on the number of nodes to which the network scales, as a function of QoI
%(logarithmic scale).}
% \label{fig:scal-log}
%\end{figure}

%In order to better see the behavior at higher QoI, Figure \ref{fig:scal-log}
%shows the same data on a logarithmic scale.


